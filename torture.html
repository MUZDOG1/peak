<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>torture them.</title>
  <style>
    body {
      margin: 0;
      background: #111;
      color: #fff;
      font-family: sans-serif;
      text-align: center;
    }
    #gameCanvas {
      background: #222;
      display: block;
      margin: 20px auto;
      border: 2px solid #444;
    }
    #instructions {
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>kill them all.</h1>
  <p id="instructions">space to hit.</p>
  <canvas id="gameCanvas" width="800" height="600"></canvas>
  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    // Load the image for the attacker
    const attackerImage = new Image();
    attackerImage.src = 'idle.png';
    
    // Load the image for the enemy (target)
    const enemyImage = new Image();
    enemyImage.src = 'enemyidle.png';

    // Game objects
    const attacker = {
      x: 100,
      y: 300,
      width: 50,
      height: 50,
      speed: 5
    };

    const target = {
      x: 600,
      y: 300,
      width: 50,
      height: 50,
      isHurt: false // This flag is still here if you wanna trigger a state change later
    };

    // Keyboard state
    const keys = {};

    window.addEventListener('keydown', (e) => {
      keys[e.key] = true;
      // Trigger interaction if space is pressed and collision occurs
      if (e.key === ' ' && isColliding(attacker, target)) {
        target.isHurt = true;
        console.log("Torture interaction triggered!");
      }
    });

    window.addEventListener('keyup', (e) => {
      keys[e.key] = false;
    });

    // Basic collision detection
    function isColliding(a, b) {
      return (
        a.x < b.x + b.width &&
        a.x + a.width > b.x &&
        a.y < b.y + b.height &&
        a.y + a.height > b.y
      );
    }

    function update() {
      // Movement controls for the attacker
      if (keys['ArrowUp']) attacker.y -= attacker.speed;
      if (keys['ArrowDown']) attacker.y += attacker.speed;
      if (keys['ArrowLeft']) attacker.x -= attacker.speed;
      if (keys['ArrowRight']) attacker.x += attacker.speed;

      // Keep attacker within canvas bounds
      attacker.x = Math.max(0, Math.min(canvas.width - attacker.width, attacker.x));
      attacker.y = Math.max(0, Math.min(canvas.height - attacker.height, attacker.y));

      // Reset target hurt state if attacker moves away
      if (!isColliding(attacker, target)) {
        target.isHurt = false;
      }
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw the enemy using its image
      if (enemyImage.complete) {
        ctx.drawImage(enemyImage, target.x, target.y, target.width, target.height);
      } else {
        // Fallback: draw a rectangle, color changes if hurt
        ctx.fillStyle = target.isHurt ? 'orange' : 'red';
        ctx.fillRect(target.x, target.y, target.width, target.height);
      }

      // Draw the attacker using its image
      if (attackerImage.complete) {
        ctx.drawImage(attackerImage, attacker.x, attacker.y, attacker.width, attacker.height);
      } else {
        // Fallback: draw a blue rectangle if the image hasn't loaded
        ctx.fillStyle = 'blue';
        ctx.fillRect(attacker.x, attacker.y, attacker.width, attacker.height);
      }
    }

    function gameLoop() {
      update();
      draw();
      requestAnimationFrame(gameLoop);
    }

    // Start the game loop
    gameLoop();
  </script>
</body>
</html>

  