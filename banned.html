<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>banned word tester</title>
</head>
<body>
  <h1>test out banned words here</h1>
  <a href="index.html">← back to chat</a>
  <input id="word" placeholder="Enter word">
  <button id="go">check</button>
  <div id="out"></div>

  <script>
    let banned = [];
    fetch('banned_words.txt')
      .then(r => r.ok ? r.text() : Promise.reject(r.status))
      .then(txt => {
        banned = txt
          .split(/\r?\n/)
          .map(w => w.trim().toLowerCase())
          .filter(Boolean);
      })
      .catch(err => {
        document.getElementById('out').textContent = 'Error loading list';
        console.error(err);
      });

    document.getElementById('go').onclick = () => {
      const w = document.getElementById('word').value.trim().toLowerCase();
      if (!w) return;

      const out = document.getElementById('out');
      out.innerHTML = '';               // clear old
      if (banned.includes(w)) {
        out.textContent = `"${w}" is BANNED`;
      } else {
        // show “allowed” + a report button
        const span = document.createElement('span');
        span.textContent = `"${w}" is allowed `;
        const btn = document.createElement('button');
        btn.textContent = 'report';
        btn.onclick = () => {
          btn.disabled = true;
          btn.textContent = 'reporting…';
          // send POST to PHP
          fetch('report.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
            body: 'word=' + encodeURIComponent(w)
          })
          .then(r => r.ok ? r.text() : Promise.reject(r.status))
          .then(msg => {
            btn.textContent = 'reported ✓';
          })
          .catch(() => {
            btn.textContent = 'error!';
            btn.disabled = false;
          });
        };
        out.appendChild(span);
        out.appendChild(btn);
      }
    };
  </script>
</body>
</html>
